<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container" onclick="openLoginModal()">
                    <img src="C:\Users\Mico\OneDrive\Desktop\PROJECTS\POS\pics\logo.png" alt="" class="logo-img" onerror="this.style.display='none'">
                    <div class="logo-text" id="posTitle">POS</div>
                </div>
                <div class="nav">
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="pos-layout">
            <!-- Products Section -->
            <div class="products-section">
                <div class="category-tabs" id="categoryTabs">
                    <div class="category-tab active" data-category="all" onclick="filterByCategory('all')">üì¶ All Items</div>
                </div>
                
                <div class="products-grid" id="productsGrid">
                </div>
            </div>

            <!-- Cart Section -->
            <div class="cart-panel">
                <div class="cart-header">
                    <div class="cart-title">Current Order</div>
                    <button class="btn btn-outline" onclick="clearCart()">Clear</button>
                </div>
                
                <div class="cart-items" id="cartItems">
                </div>
                
                <div class="cart-total">
                    <div class="total-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">‚Ç±0.00</span>
                    </div>
                    <div class="total-row" id="discountRow" style="display: none;">
                        <span>Discount:</span>
                        <span id="discountAmount">-‚Ç±0.00</span>
                    </div>
                    <div class="total-row grand-total">
                        <span>Total:</span>
                        <span id="total">‚Ç±0.00</span>
                    </div>

                    <div class="checkout-section">
                        <div class="form-group">
                            <label class="form-label">Discount</label>
                            <div class="discount-buttons">
                                <div class="discount-btn active" data-type="none" onclick="applyDiscount('none')">
                                    No Discount
                                </div>
                                <div class="discount-btn" data-type="senior" onclick="applyDiscount('senior')">
                                    Senior (20%)
                                </div>
                                <div class="discount-btn" data-type="pwd" onclick="applyDiscount('pwd')">
                                    PWD (20%)
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-primary checkout-btn" onclick="openPaymentModal()">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>

            <!-- Queue Panel -->
            <div class="queue-panel">
                <div class="queue-header">
                    <div class="queue-title">Queueing Line</div>
                    <div class="queue-count" id="queueCount">0 orders</div>
                </div>
                
                <div class="queue-items" id="queueItems">
                    <div class="text-center" style="color: var(--secondary); padding: 40px;">
                        No active orders
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Login to Inventory</div>
                <button class="close-btn" onclick="closeLoginModal()">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="text" class="form-input" id="loginEmail" value="">
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="loginPassword" value="">
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-outline" onclick="closeLoginModal()">&nbsp;Cancel</button>
                <button type="button" class="btn btn-primary" onclick="handleLogin()">&nbsp;&nbsp;Login</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="paymentModalTitle">Payment Method</div>
                <button class="close-btn" onclick="closePaymentModal()">&times;</button>
            </div>
            
            <div id="paymentMethodSelection">
                <div class="form-group">
                    <label class="form-label">Choose how to pay:</label>
                    <div class="payment-methods-grid">
                        <div class="payment-btn-card" onclick="selectPaymentOption('cash')">
                            <div class="payment-icon">üíµ</div>
                            <div class="payment-name">Cash</div>
                        </div>
                        <div class="payment-btn-card" onclick="selectPaymentOption('gcash')">
                            <div class="payment-icon">üì±</div>
                            <div class="payment-name">GCash</div>
                        </div>
                        <div class="payment-btn-card" onclick="selectPaymentOption('multi')">
                            <div class="payment-icon">üîÄ</div>
                            <div class="payment-name">Split Payment</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="singlePaymentSection" style="display: none;">
                <button class="btn btn-sm btn-outline mb-4" onclick="backToPaymentSelection()">‚Üê Change Method</button>
                
                <div class="form-group">
                    <label class="form-label" id="singlePaymentLabel">Cash Amount</label>
                    <input type="number" class="form-input" id="singlePaymentAmount" placeholder="Enter amount" step="0.01" min="0">
                </div>
                
                <div class="payment-summary">
                    <div class="payment-row">
                        <span>Total Amount:</span>
                        <span id="paymentTotal">‚Ç±0.00</span>
                    </div>
                    <div class="payment-row">
                        <span id="singlePaymentType">Cash Paid:</span>
                        <span id="singlePaymentPaid">‚Ç±0.00</span>
                    </div>
                    <div class="payment-row grand-total">
                        <span>Change:</span>
                        <span id="singlePaymentChange">‚Ç±0.00</span>
                    </div>
                </div>
            </div>

            <div id="multiPaymentSection" style="display: none;">
                <button class="btn btn-sm btn-outline mb-4" onclick="backToPaymentSelection()">‚Üê Change Method</button>

                <div class="form-group">
                    <label class="form-label">Cash Amount</label>
                    <input type="number" class="form-input" id="multiCashAmount" placeholder="Cash amount" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label class="form-label">GCash Amount</label>
                    <input type="number" class="form-input" id="multiGcashAmount" placeholder="GCash amount" step="0.01" min="0">
                </div>
                
                <div class="payment-summary">
                    <div class="payment-row">
                        <span>Total Amount:</span>
                        <span id="multiPaymentTotal">‚Ç±0.00</span>
                    </div>
                    <div class="payment-row">
                        <span>Total Paid:</span>
                        <span id="multiTotalPaid">‚Ç±0.00</span>
                    </div>
                    <div class="payment-row grand-total">
                        <span>Remaining:</span>
                        <span id="multiPaymentRemaining">‚Ç±0.00</span>
                    </div>
                </div>
            </div>

            <div id="paymentActionButtons" style="display: none;">
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closePaymentModal()">&nbsp;Cancel</button>
                    <button type="button" class="btn btn-primary" id="processPaymentBtn" onclick="processPayment()" disabled>Process Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal" id="receiptModal" style="z-index: 25000;">
        <div class="modal-content" style="max-width: 350px; padding: 0;">
            <div class="modal-header" style="padding: 15px 20px; border-bottom: 1px solid #eee;">
                <div class="modal-title">Transaction Receipt</div>
                <button class="close-btn" onclick="closeReceiptModal()">&times;</button>
            </div>
            <div id="receiptContent" style="padding: 20px; background: #f9f9f9; max-height: 60vh; overflow-y: auto;"></div>
            <div class="form-actions" style="padding: 15px 20px; border-top: 1px solid #eee; background: white; border-radius: 0 0 8px 8px;">
                <button type="button" class="btn btn-outline" onclick="closeReceiptModal()">&nbsp;Cancel</button>
                <button type="button" class="btn btn-primary" onclick="printReceipt()">üñ®Ô∏è Print</button>
            </div>
        </div>
    </div>

    <!-- Security Modal -->
    <div class="modal" id="securityModal" style="z-index: 30000;">
        <div class="modal-content" style="max-width: 350px;">
            <div class="modal-header">
                <div class="modal-title">üîí Security Check</div>
                <button class="close-btn" onclick="closeSecurityModal()">&times;</button>
            </div>
            <form onsubmit="handleVoidSecurityCheck(event)">
                <div class="form-group">
                    <label class="form-label">Enter Admin Email</label>
                    <input type="text" class="form-input" id="secEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Enter Password</label>
                    <input type="password" class="form-input" id="secPass" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeSecurityModal()">Cancel</button>
                    <button type="submit" class="btn btn-danger">Confirm Void</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="customConfirmModal" style="z-index: 31000;">
        <div class="modal-content error-theme" style="max-width: 400px; text-align: center;">
            <div style="margin-bottom: 15px;">
                <div style="font-size: 40px; margin-bottom: 15px;">‚ö†Ô∏è</div>
                <h3 id="confirmTitle" style="font-size: 22px; font-weight: bold; margin-bottom: 10px; color: #991b1b;">Void Transaction?</h3>
                <p id="confirmMessage" style="color: #ef4444; margin-bottom: 24px; font-weight: 500;">
                    Stock will be returned to inventory. This cannot be undone.
                </p>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-outline" onclick="closeConfirmModal()" style="min-width: 100px; background: white; border-color: #ef4444; color: #ef4444;">Cancel</button>
                <button class="btn btn-danger" id="confirmActionBtn" style="min-width: 100px;">Yes, Void It</button>
            </div>
        </div>
    </div>

    <!-- Error Alert Modal -->
    <div class="modal" id="errorAlertModal" style="z-index: 32000;">
        <div class="modal-content error-theme" style="max-width: 400px; text-align: center;">
            <div style="margin-bottom: 15px;">
                <div style="font-size: 40px; margin-bottom: 15px;">‚ùå</div>
                <h3 id="errorAlertTitle" class="error-title">Error</h3>
                <p id="errorAlertMessage" class="error-message">Something went wrong.</p>
            </div>
            <button class="btn btn-danger" onclick="closeErrorAlert()" style="width: 100%; justify-content: center;">OK</button>
        </div>
    </div>
    <div class="modal" id="orderDetailsModal" style="z-index: 26000;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <div class="modal-title" id="orderDetailsTitle">Order Details</div>
                <button class="close-btn" onclick="closeOrderDetailsModal()">&times;</button>
            </div>
            
            <div id="orderDetailsContent" class="cart-items" style="max-height: 40vh; overflow-y: auto;">
                </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="closeOrderDetailsModal()">&nbsp;&nbsp;Done</button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="pos.js"></script>
</body>
</html>